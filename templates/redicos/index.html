{% extends "base.html" %}
{% load evaluations_tags %}
{% load i18n %}
{{% comment %}
    0- Template redico-index.html
    1- Ligne d'actions avec Votre profil (le connecté) et Démarrer un nouveau redico
    2- Table avec en-tête Liste des joueurs
    3- Colonnes`Joueur-Depuis-Auteur de...-Participe à...
{% endcomment %}


{% block centre %}
{#        <div id="tblredsindex">#}
    <table class="table table-striped table-bordered table-hover table-warning border-primary caption-top">
        <caption class="text-dark text-center">Liste des Redicos (redicos/index.html)</caption>
        <thead>
            <tr class="active">
{#            <th>Actions</th>#}
            <th>Titre</th>
{#            <th>Nb props</th>#}
            <th>Auteur</th>
            <th>Les joueurs</th>
            </tr>
        </thead>

        <tbody>

            {% for red in reds %} {# Pour tous les redicos #}
                <tr> {# Début de la ligne ACTIONS-JTITRE=NBPROPS-AUTEUR-LES JOUEURS #}
                    <td>
                        <a href="{% url 'redico-details' red.id  %}"> {{ red.titre|urlize|truncatechars:100 }} -- ({{ red.ses_props|length }} proposition{{ red.ses_props|length|pluralize }})</a>
                    </td>

                    <td>{# CELLCRÉATEUR #}
                        {{ red.auteur|truncatechars:7 }}
                    </td>

                    <td> {# CELL LESJOUEURS #}
                        {% with infos=red.ses_participants %}
                            {% if infos %}
{#                                <table class="table table-success table-striped table-sm">#}
                                   <table class="table table-no-border table-warning  table-striped table-sm">

                                    {% for info in infos %}
                                        <tr>
                                            <td class="btn-action">
                                                <div style="text-align:center">
                                                <a href="/joueur/{{ info.auteur__id}}"> {{ info.auteur__username|truncatechars:20  }}  </a>
                                                </div>

                                            </td>
                                        </tr>
                                    {% endfor %}
                                 </table>
                            {% else %}
                                -
                            {% endif %}
                        {% endwith %}
                    </td>
                </tr> {# Fin de la ligne ACTIONS-JTITRE=NBPROPS-AUTEUR-LES JOUEURS #}
            {% endfor %}
        </tbody>
    </table>
{% endblock centre %}


